
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="hhhjyz的笔记本">
      
      
        <meta name="author" content="hhhjyz">
      
      
        <link rel="canonical" href="https://hhhjyz.github.io/note/courses/Computer%20Architecture/Chapter%204/">
      
      
        <link rel="prev" href="../Chapter%203/">
      
      
        <link rel="next" href="../Chapter%205/">
      
      
      <link rel="icon" href="../../../../image/head.jpg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Chapter 4 - hhhjyz的笔记本</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../../../css/round.css">
    
      <link rel="stylesheet" href="../../../../css/extra.css">
    
      <link rel="stylesheet" href="https://fonts.loli.net/css2?family=Noto+Serif+SC&display=swap">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="light">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#instruction-level-parallelismilp" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../.." title="hhhjyz的笔记本" class="md-header__button md-logo" aria-label="hhhjyz的笔记本" data-md-component="logo">
      
  <img src="../../../../image/head.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            hhhjyz的笔记本
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Chapter 4
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="light"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/hhhjyz/hhhjyz.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    hhhjyz/note
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../ads/Final/" class="md-tabs__link">
          
  
  
    
  
  课程笔记

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../self-study/EECS498/Lec2%20Image%20Classification/" class="md-tabs__link">
          
  
  
    
  
  自学

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../use/" class="md-tabs__link">
        
  
  
    
  
  ZJU工具

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="hhhjyz的笔记本" class="md-nav__button md-logo" aria-label="hhhjyz的笔记本" data-md-component="logo">
      
  <img src="../../../../image/head.jpg" alt="logo">

    </a>
    hhhjyz的笔记本
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hhhjyz/hhhjyz.github.io" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    hhhjyz/note
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    课程笔记
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            课程笔记
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    高级数据结构与算法分析
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            高级数据结构与算法分析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Final/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Review
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Lec8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec8 Dynamic Programming
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Lec%209/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec9 Greedy Algorithm
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Lec%2010/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec10 NP-Completeness
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Lec11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec11 Approximation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Lec%2012/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec12 Local Search
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ads/Lec14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec14 Parallel Algorithm
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    计算机组成
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            计算机组成
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../computer_organization/Chapter%201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../computer_organization/Chapter%202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../computer_organization/Chapter%204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../computer_organization/Chapter%205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../computer_organization/Chapter%206/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 6
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../physics/%E5%A4%A7%E7%89%A9%E5%AE%9E%E9%AA%8C%E6%9C%9F%E6%9C%AB%E5%A4%8D%E4%B9%A0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    大学物理实验
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    数据库系统
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            数据库系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database%20system/chaper%201%20Introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chpater 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database%20system/Chapter%202%20Relational%20Modeling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database%20system/Chapter%203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database%20system/Chapter%204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../database%20system/Chapter%205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 5
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" checked>
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    计算机体系结构
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            计算机体系结构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter%201%20Fundamentals%20of%20computer%20design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter%202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter%203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Chapter 4
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Chapter 4
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-the-classic-five-stage-pipeline-for-a-risc-processor" class="md-nav__link">
    <span class="md-ellipsis">
      1 The Classic Five-Stage Pipeline for a RISC Processor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-dynamic-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2 Dynamic Scheduling 动态调度
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Dynamic Scheduling 动态调度">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-scoreboard" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Scoreboard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 发射
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 发射">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-summary" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.1 Summary
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-tomasulos-approach" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Tomasulo's Approach
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-hardware-based-speculation" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 Hardware-Based Speculation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-exploiting-ilp-using-multiple-issue-and-static-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3 Exploiting ILP Using Multiple Issue and Static Scheduling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Exploiting ILP Using Multiple Issue and Static Scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-multi-issue-technology-based-on-static-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Multi-issue Technology based on Static Scheduling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-multi-issue-technology-based-on-dynamic-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Multi-issue Technology based on Dynamic Scheduling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-vlim" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 VLIM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-super-pipelined" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 Super Pipelined
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Chapter%205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 5
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    人工智能
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            人工智能
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AI/Chapter%202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AI/Chapter%203/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AI/Chapter%204/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AI/Chapter%205/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AI/Chapter%206/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 6
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    面向对象程序设计
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            面向对象程序设计
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OOP/Lecture%208%20Stream/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec8
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../OOP/Lecture%209%20Exception/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lec9
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    自学
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            自学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EECS498-005
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            EECS498-005
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec2%20Image%20Classification/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Image Classification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec3%20Linear%20Classifiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linear Classifiers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec4%20Optimization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec5%20Neural%20Network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Neural Network
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec6%20Backpropagation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backpropagation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec8%20CNN%20Architectures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CNN Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec9%20Hardware%20and%20Software/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hardware and Software
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec10%20Training%201/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Training 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec11%20Training%202/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Training 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec12%20Recurrent%20Neural%20Networks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recurrent Neural Networks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec13%20Attention/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Attention
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec14%20Visualizing%20and%20Understanding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visualizing and Understanding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec15%20Object%20Detection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Object Detection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/EECS498/Lec16%20Detection%20and%20Segmentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Detection and Segmentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    工具
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            工具
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../self-study/tools/conda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    conda
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../use/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ZJU工具
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-the-classic-five-stage-pipeline-for-a-risc-processor" class="md-nav__link">
    <span class="md-ellipsis">
      1 The Classic Five-Stage Pipeline for a RISC Processor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-dynamic-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2 Dynamic Scheduling 动态调度
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Dynamic Scheduling 动态调度">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-scoreboard" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Scoreboard
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 发射
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 发射">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-summary" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.1 Summary
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-tomasulos-approach" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Tomasulo's Approach
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-hardware-based-speculation" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 Hardware-Based Speculation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-exploiting-ilp-using-multiple-issue-and-static-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3 Exploiting ILP Using Multiple Issue and Static Scheduling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Exploiting ILP Using Multiple Issue and Static Scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-multi-issue-technology-based-on-static-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Multi-issue Technology based on Static Scheduling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-multi-issue-technology-based-on-dynamic-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Multi-issue Technology based on Dynamic Scheduling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-vlim" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 VLIM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-super-pipelined" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 Super Pipelined
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="instruction-level-parallelismilp">Instruction-Level parallelism(ILP)<a class="headerlink" href="#instruction-level-parallelismilp" title="Permanent link">&para;</a></h1>
<h2 id="1-the-classic-five-stage-pipeline-for-a-risc-processor">1 The Classic Five-Stage Pipeline for a RISC Processor<a class="headerlink" href="#1-the-classic-five-stage-pipeline-for-a-risc-processor" title="Permanent link">&para;</a></h2>
<div align = center><img src="../assets/Chapter%204/file-20250516192239023.png"></div>

<p>重命名可以用于解决Name Dependences</p>
<p>A major limitation of simple pipelining techniques:使用顺序的发射和执行</p>
<h2 id="2-dynamic-scheduling">2 Dynamic Scheduling 动态调度<a class="headerlink" href="#2-dynamic-scheduling" title="Permanent link">&para;</a></h2>
<p>out-of-order execution 会导致<code>WAR</code>和<code>WAW</code>冒险, 在五级流水线中不存在</p>
<p><strong>Idea</strong>: Dynamic Scheduling</p>
<p><strong>Method:</strong> out-of-order execution</p>
<div class="admonition example">
<p class="admonition-title">Dynamic Scheduling with scoreboard</p>
<p><img alt="" src="../assets/Chapter%204/file-20250408142545486.png" /></p>
</div>
<ul>
<li>scoreboard算法是一种调度指令的方法</li>
<li>Robert Tomasulo 引入了硬件中寄存器重命名来最小化
  <code>WAR</code>和<code>WAW</code>冒险</li>
</ul>
<p>为了能够实现乱序执行，我们将ID阶段分解为两个阶段：</p>
<ul>
<li>Issue Stage (IS): 解码指令，检查结构冲突(in - order issue)</li>
<li>Read Operands Stage (RO): Wait 直到没有数据冲突， 接着读取操作数(out - of - order issue)</li>
</ul>
<div align = center><img src="../assets/image-2.png" width = 70%></div>

<h3 id="21-scoreboard">2.1 Scoreboard<a class="headerlink" href="#21-scoreboard" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>功能单元状态</strong>：记分牌是面向功能部件的，在记分牌中每一个功能部件都有一组信息，信息包括部件是否正在忙、部件执行的指令类型、部件现在需要的源寄存器、部件现在的目的寄存器、源寄存器是否准备好（Rj、Rk 表示）和如果源寄存器没准备好部件该向哪里要数据（Qj、Qk 表示</li>
<li><strong>寄存器结果状态</strong>：里面主要记录对于某一个寄存器，是否有部件正准备写入数据。</li>
</ul>
<div align = center><img src="../assets/v2-6b7e47a0ccd134bb87f058bc23ff2468_1440w.jpg"></div>

<h3 id="22">2.2 发射<a class="headerlink" href="#22" title="Permanent link">&para;</a></h3>
<p>对指令进行解码，并观察记分牌信息，主要观察各个功能部件的占用情况，和寄存器堆的写情况，以此来判断是否可以把解码得到的信息存进对应的部件寄存器。</p>
<p><strong>如果指令对应的功能部件空闲</strong>，<strong>且指令要写的目标寄存器没有别的指令将要写</strong>（这是为了解决 WAW 冒险），那么阶段结束的时候，就可以把指令信息存进部件寄存器，同时改写记分牌，把指令相关信息进入记分牌。</p>
<h4 id="221-summary">2.2.1 Summary<a class="headerlink" href="#221-summary" title="Permanent link">&para;</a></h4>
<p>IS阶段能够进入取决于运算需要的部件是否空闲,如果功能部件被上一条指令占用，则不能进入IS阶段，在上一条指令WB阶段完成之前，不能进入IS阶段。</p>
<p>RO阶段能否进入取决于依赖的register是否ready</p>
<p>WB阶段能否进入取决于需要写入的寄存器是否读走</p>
<div align = center><img src="../assets/image-3.png" width = 70%></div>

<h3 id="23-tomasulos-approach">2.3 Tomasulo's Approach<a class="headerlink" href="#23-tomasulos-approach" title="Permanent link">&para;</a></h3>
<div class="admonition example">
<p class="admonition-title">Tomasulo's Approach</p>
<p>consider the following code:
<img alt="alt text" src="../assets/image-4.png" />
WAW和WAR冒险（即name dependency）都可以通过寄存器重命名来解决</p>
<div class="highlight"><pre><span></span><code>- 假设现在有两个临时寄存器S、T
- 这个指令序列可以被重写为（没有任何dependencies）
</code></pre></div>
<p><img alt="alt text" src="../assets/image-5.png" /></p>
</div>
<div align = center><img src="../assets/image-20250415133849422.png" width=50%></div>

<p>绿色的是保留栈，可以用于存储指令和重命名</p>
<ul>
<li>
<p>It tracks when operands for instructions are available to minimize RAW hazards;</p>
</li>
<li>
<p>It introduces register renaming in hardware to minimize WAW and WAR hazards.</p>
</li>
</ul>
<p><strong>分为3步</strong>(Get the next instruction from the head of the instruction queue (FIFO))：</p>
<ul>
<li>发射：从指令队列（先进先出）的头部获取下一条指令。 </li>
<li>如果有一个匹配的且为空的保留栈，若操作数当前在寄存器中，就将带有操作数的指令发射到该保留栈。 </li>
<li>如果没有空的保留站，那么就存在结构冒险，并且该指令会暂停，直到有一个保留站或缓冲区被释放。 </li>
<li>如果操作数不在寄存器中，追踪将会产生这些操作数的功能单元。 </li>
</ul>
<p>这些步骤重命名了寄存器，避免了</p>
<p>Issue 时寄存器内容就已经被读走了，可以进行写入</p>
<p><strong>Execute</strong>: </p>
<ul>
<li>当所有操作数都空闲，操作可以在对应的功能单元中执行</li>
<li>Load and Store require a two-step execu process:<ul>
<li>当base register可用时，计算effective address(是指指令在执行时，经过寻址模式计算后得到的实际内存地址，用于访问（读取或写入）数据。它是程序运行时确定的地址，而不是指令中直接编码的地址（如立即数或标签）。) </li>
</ul>
</li>
</ul>
<p><strong>Write Result</strong>:</p>
<ul>
<li>当结果可获得时，结果会被写入到Common Data Bus中，接着从CDB中写入到reservation stations中(包括store buffers)</li>
<li>要写入内存的值存储在store buffer 中直到要被写入的值和地址都可用，接着结果在memory unit空闲时被写入</li>
</ul>
<p>There are three tables for Tomasulo's Approach:</p>
<ul>
<li>Instruction Status Table: 这个表仅仅用来帮助理解算法，并非是硬件实现的一部分</li>
<li>Reservation Stations Table: 保留每个被发射的操作的状态</li>
<li>Register status table (Field Qj): The number of the reservation station <ul>
<li>存储应该被存储在寄存器中的操作</li>
</ul>
</li>
</ul>
<p><strong>Each reservation station has 7 fields</strong>:</p>
<ul>
<li><strong>Op</strong>: 原操作上的操作数</li>
<li><strong>Qj,Qk</strong>: 会产生对应的操作数的保留站</li>
<li><strong>Vj,Vk</strong>: 源操作数的值</li>
<li><strong>A</strong>: 用来记录计算store和load指令的地址需要的信息</li>
<li><strong>Busy</strong>: 该保留站和它使用的功能单元是否被占用</li>
</ul>
<p><img alt="alt text" src="../assets/image-6.png" /></p>
<h3 id="24-hardware-based-speculation">2.4 Hardware-Based Speculation<a class="headerlink" href="#24-hardware-based-speculation" title="Permanent link">&para;</a></h3>
<p>Cache for uncommitted instruction results:</p>
<p>3 fields: instruction type, destination address, value</p>
<ul>
<li>当指令的execution阶段已经完成，将RS中的值替换为the number of ROB</li>
<li>Increase instruction submission stage</li>
<li>ROB提供了completion和 commit 阶段operation的数量</li>
<li>当操作数被提交之后，结果就会被写回到寄存器中</li>
<li>以这种方式，当预测失败时，容易存储预测执行的指令，当异常发生时，容易存储状态</li>
</ul>
<div align = center><img src="../assets/Chapter%204/file-20250422141935954.png" width = 60%></div>

<div align=center><img src="../assets/Chapter%204/file-20250422142045244.png"width = 60%></div>

<ul>
<li>Issue: 从 instruction queue 取指令</li>
<li>Execution: 操作操作数</li>
<li>Write Result: 完成执行</li>
<li>Commit: 用reorder result更新寄存器</li>
</ul>
<p>就我的理解而言，本来是在WB阶段直接将结果写入寄存器堆，应用Hardware-based speculation后，WB阶段的结果是写入到ROB中，等到commit阶段再将ROB中的结果写入寄存器堆中。</p>
<p><strong>Hardware-based speculation combines three key ideas</strong></p>
<ul>
<li>dynamic branch prediction to choose which instructions to execute</li>
<li>speculation to allow the execution of instructions before the control dependences are resolved (with the ability to undo the effects of an incorrectly speculated sequence)<strong>即加入ROB</strong>给了反悔的余地</li>
<li>dynamic scheduling to deal with the scheduling of different combinations of basic blocks</li>
</ul>
<div class="admonition note">
<p class="admonition-title">执行过程</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">WB</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><strong>重排序缓冲区（ROB）(Reorder Buffer)</strong>在指令操作完成到指令提交期间，临时保存该指令的结果。
ROB为指令提供操作数，其作用类似于Tomasulo算法中保留站（reservation stations）的功能。</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Commit</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p>实现推测执行的核心思想是：允许指令乱序执行，但强制按序提交，并在指令提交前阻止任何不可逆操作。
重排序缓冲区（ROB）通过提供额外的寄存器，其作用与Tomasulo算法中保留站扩展寄存器集的方式类似。   </p>
</div>
<div class="admonition example">
<p class="admonition-title">Hardware-based speculation</p>
<p><img alt="alt text" src="../assets/image-7.png" />
按序 Issue/Commit, 乱序Execution/WriteBack</p>
</div>
<ul>
<li>指令按照ROB中的顺序来完成</li>
<li>可以实现精确异常</li>
<li>方便扩展</li>
<li>但是硬件实现非常复杂</li>
</ul>
<h2 id="3-exploiting-ilp-using-multiple-issue-and-static-scheduling">3 Exploiting ILP Using Multiple Issue and Static Scheduling<a class="headerlink" href="#3-exploiting-ilp-using-multiple-issue-and-static-scheduling" title="Permanent link">&para;</a></h2>
<p>多流出，即一拍可以流出多条指令。</p>
<ul>
<li>
<p>Superscalar</p>
<ul>
<li>可以分为静态调度超标量和动态调度超标量。静态调度是通过编译器来完成的，动态调度是通过硬件来完成的。</li>
<li>是最成功的General Computing 方法</li>
<li>每个时钟周期发射的指令条数可以不一样（1~8）</li>
<li>n-issue：每个时钟周期最多发射n条指令</li>
</ul>
</li>
<li>
<p>VLIW （very long instruction word）</p>
<p>超长指令字也是通过编译器完成静态调度。</p>
<p>每个时钟周期发射的指令条数是固定的（4-16）。他们组成一条长指令或者一个指令包</p>
<p>在指令包中，指令间的并行通过指令显示地表达</p>
<p>It has been successfully applied to digital signal processing and</p>
</li>
</ul>
<div class="admonition exmaple">
<p class="admonition-title">SuperScalar &amp; VLIW</p>
<p><img alt="" src="../assets/Chapter%204/file-20250422134852283.png" />
<img alt="alt text" src="../assets/image-8.png" /></p>
</div>
<h3 id="31-multi-issue-technology-based-on-static-scheduling">3.1 Multi-issue Technology based on Static Scheduling<a class="headerlink" href="#31-multi-issue-technology-based-on-static-scheduling" title="Permanent link">&para;</a></h3>
<p>在典型的超标量处理器中，每个时钟周期可以发射<strong>1至8条指令</strong>。指令<strong>按序发射</strong>，并在发射时进行冲突检测。当前指令序列中需确保不存在数据冲突或近位冲突。</p>
<p>指令顺序流出，在流出时进行冲突检测；在并行的指令中，不存在data conflict and close conflict</p>
<div class="highlight"><pre><span></span><code>- **Data conflict**: 读写同一个寄存器
- **Close conflict**: 读写同一个寄存器，且读操作在写操作之前
</code></pre></div>
<p>Outgoing Component 检测结构冲突和数据冲突</p>
<ul>
<li>The first Stage: 进行输出包中的冲突检测，挑选可以被流出的这令</li>
<li>The second Stage: 检查被挑选的指令执行时是否发生冲突</li>
</ul>
<div class="admonition example">
<p class="admonition-title">RISC-V多发射实现</p>
<ul>
<li>two instruction flow out every cycle(一个integer instruction和一个floating point instruction)</li>
<li>load ,store, and branch instructions 是 integer instructions</li>
</ul>
<p>Claim：Fetch two instructions(64-bit) at the same time and decode two instructions(64-bit)</p>
<ul>
<li>指令的加载包括接下来的步骤：<ul>
<li>从cache中加载两条指令</li>
<li>确定这两条指令可以流出</li>
<li>将指令送到对应的功能单元</li>
</ul>
</li>
</ul>
<p>在这种设计下，需要增加的硬件很少。浮点数load/store时需要使用integer part,会增加浮点数寄存器的延迟</p>
<p>增加floating point register的读写通道</p>
<p>Since the number of instructions in the pipeline has doubled, the directional path has to be increased.</p>
</div>
<h3 id="32-multi-issue-technology-based-on-dynamic-scheduling">3.2 Multi-issue Technology based on Dynamic Scheduling<a class="headerlink" href="#32-multi-issue-technology-based-on-dynamic-scheduling" title="Permanent link">&para;</a></h3>
<p><strong>Extended Tomasulo Algorithm</strong>: 支持2路多发射；每个时钟周期可以发射两条指令，一个是interger指令，一个是浮点指令</p>
<p>使用两种简单方法：</p>
<ul>
<li>指令顺序流向RS，否则程序semantics会被破坏</li>
<li>将用于整数的表结构与表结构分开</li>
</ul>
<p>用于浮点数，并将它们分开处理，使一个浮点指令和一个整数指令可以同一时间各自发送至保留站。</p>
<div class="admonition example">
<p class="admonition-title">Extended Tomasulo Algorithm</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:3"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><input id="__tabbed_3_3" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Question:</label><label for="__tabbed_3_2">Solution</label><label for="__tabbed_3_3">Analysis</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>For the RISC-V pipeline that uses the Tomasulo algorithm and multiissue technology, consider the following simple loop execution. This program adds the scalar in X2 to each element of a vector.
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>    ld x2, 0(x1) //X2=array element
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    addi x2, x2, 1 //increment X2
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>    sd x2, 0(x1) //store X2
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    addi x1,x1,8//increment pointer by 8 (each data occupies 8 bytes)
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    bne x2,x3,loop //branch if not equal
</code></pre></div>
Now make the following assumptions:</p>
<ul>
<li>每个周期一个整数指令和一个浮点数指令，即使他们关联</li>
<li>一个做整数ALU操作和地址计算的整数单元，对于每一种类型的浮点数操作，有一个独立的浮点单元</li>
<li>指令可以流出和写入结果花费1个周期</li>
<li>有动态分支预测单元和一个独立的功能单元来计算分支情况</li>
<li>Branch instructions flowed out separately, no delayed branch was used, but branch prediction was perfect. Before the branch instruction is completed, its subsequent instructions can only be fetched and flowed out, but cannot be executed</li>
</ul>
<p>由于写回操作占据一个周期，产生结果的延迟是： 1 cycle for operation, 2 cycles for load, 3 cycles for floating point addition</p>
<p>List the issue of each instruction in the first three loops of the program, start execution, and write the results to the CDB.</p>
</div>
<div class="tabbed-block">
<p>在执行时，loop会动态展开，在任何可能的时候两条指令会一起发射。 For ease of analysis, the time when the memory fetch occurs is listed in the table. The running result is shown in the figure below.
<img alt="alt text" src="../assets/image-9.png" />
可以看到，data-dependent branches 和 ALU components成为了瓶颈</p>
<p>Solution: add an adder to separate the ALU function from the address calculation function</p>
<p><img alt="alt text" src="../assets/image-10.png" /></p>
</div>
<div class="tabbed-block">
<ul>
<li>In this case , 在分支成为瓶颈的时候，speculation 很有用</li>
<li>这个优势建立在正确的分支预测上</li>
<li>错误的分支预测无法提高性能，反而影响性能并极大降低能效</li>
</ul>
</div>
</div>
</div>
</div>
<h3 id="33-vlim">3.3 VLIM<a class="headerlink" href="#33-vlim" title="Permanent link">&para;</a></h3>
<ul>
<li>VLIW: Very Long Instruction Word</li>
</ul>
<p>Assemble multiple instructions that can be executed in parallel into a very
long instruction (more than 100 bits to hundreds of bits).</p>
<p>指令被划分为多个fields, 每个field叫做一个operaion slot, 直接独立控制一个功能单元</p>
<p>在VLIW中，所有的加载和指令安排由编译器完成</p>
<p>在编译时，不相关的操作可以并行执行，被合并为一个指令包with multiple operation segments</p>
<p><img alt="alt text" src="../assets/image-11.png" /></p>
<p>!!! example the unrolled version of the loop <code>x[i] = x[i] + 1</code>
    <img alt="alt text" src="../assets/image-12.png" /></p>
<p><strong>some problems with VLIW</strong>
- 代码大小增加
- Lockstep mechanism
- Machine code incompatibility</p>
<h3 id="34-super-pipelined">3.4 Super Pipelined<a class="headerlink" href="#34-super-pipelined" title="Permanent link">&para;</a></h3>
<ul>
<li>每个流水线阶段被进一步划分，以至于多条指令可以在同一时钟周期内time-shared</li>
<li>在一个周期能流出n条指令的super pipelined processor中，n条指令不是在同一时间流出的，而是每1/n周期流出一条指令</li>
<li>the time-space diagram of a super pipelined processor that isuues 2 instructions per cycle</li>
</ul>
<div align = center><img src="../assets/image-13.png" width = 60%></div>

<p>• A pipeline processor with 8 or more instruction pipeline stages is called a superpipelining processor</p>
<div class="admonition example r4000 pipeline structre">
<p class="admonition-title">Example</p>
<ul>
<li>2 caches in the R4000 microprocessor chip<ul>
<li>instruction cache</li>
<li>data cache</li>
<li>the capacity is 8kB</li>
<li>the data with of each Cache is 64b</li>
</ul>
</li>
<li>Core processing components: integer components<ul>
<li>a 32*32 bit general register bank</li>
<li>An ALU</li>
<li>A dedicated Multiplition/division unit
<img alt="400" src="../assets/image-14.png" /></li>
</ul>
</li>
<li>IF: first half fetch,在此时选择PC，同时初始化 I cache 加载</li>
<li>IS: second half fetch, 完成 I cache 的加载</li>
<li>RF: Instruction decode and register fetch, hazard checking , and instrction cache hit detection</li>
<li>EX: Execute, effective address calculation, ALU operaion, and branch-target calculation and condition evaluation</li>
<li>DF: Data fetch, first half of data cache access</li>
<li>DS: second half of data cache access, completion fo data cache access</li>
<li>TC: Tag check , 确认D cache 是否命中</li>
<li>WB: Write back, write back for loads and register-register operations</li>
</ul>
<p><img alt="" src="../assets/image-15.png" />
<img alt="alt text" src="../assets/image-16.png" /></p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; hhhjyz/All Rights Reserved.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["content.code.annotate", "navigation.tracking", "navigation.tabs", "navigation.indexes", "navigation.top"], "search": "../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="../../../../javascripts/mathjax.js"></script>
      
        <script src="../../../../javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>